target_default: 2_model

packages:
  - dplyr
  - tidyr
  - keras

sources:
  - lib/src/utils.R
  - 2_model/src/models.R
  - 2_model/src/model_tasks.R
  - 2_model/src/evaluate.R

targets:
  2_model:
    depends:

  # read and subset the NN settings
  settings:
    command: yaml.load_file('lib/cfg/settings.yml')
  model_cfg:
    command: settings[I(c('model_functions'))]

  site_ids:
    command: get_site_ids(file = 'lib/crosswalks/pipeline_3_lakes.csv')

  model_task_plan:
    command: create_model_task_plan(site_ids, model_cfg, ind_dir = I("2_model"))

  2_model_tasks.yml:
    command: create_model_task_makefile(task_plan = model_task_plan, makefile = target_name, ind_complete = TRUE)

  #2_model/log/2_model_tasks.ind:
  #  command: loop_tasks(task_plan = model_task_plan, task_makefile = '2_model_tasks.yml', num_tries = 1)



